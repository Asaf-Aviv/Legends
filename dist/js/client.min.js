"use strict";function throttle(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Rx.Observable.fromEvent(e,t).throttleTime(a).map(function(e){return e.target.scrollY})}function debounce(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3,n=document.querySelector(e);return Rx.Observable.fromEvent(n,t).debounceTime(a).map(function(e){return e.target.value})}function successAlert(e,t,a){iziToast.show({titleColor:"green",iconColor:"green",icon:a,message:e,position:t})}function errorAlert(e,t){iziToast.show({titleColor:"red",iconColor:"red",icon:"fa fa-exclamation-triangle",title:"Error: ",message:e,position:t,overlay:!0,overlayClose:!0})}function fixPopover(){$('[data-trigger="manual"]').click(function(e){$(this).popover("toggle"),e.preventDefault()}).blur(function(){$(this).popover("hide")})}function createLoader(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";$(e).addClass("position-relative").prepend($('<div class="ui active dimmer"></div>').append($('<div class="ui text loader">'+t+"</div>")))}$(function(){var e=this;$(".lazy").Lazy(),fixPopover(),$("#tier-1 table, #tier-2 table, #tier-3 table, #tier-4 table, #tier-5 table, #leaderboard-table").DataTable({iDisplayLength:-1,paging:!1}),$('[data-toggle="tooltip"]').tooltip().click(function(e){e.preventDefault()}),$("#selected-region").click(function(){$("#regions-wrapper").toggle()}),$("#summoner-search-btn").click(function(){var e=$("#summoner-input").val(),t=$("#selected-region").data("region");console.log(e,t)}),$("#region-select > div").click(function(e){var t=$(this),a=t.data("region"),n=t.text();console.log(a,n),$("#selected-region").data("region",a).text(n),$("#regions-wrapper").hide()}),$(".util-box").click(function(e){e.stopPropagation();var t=$(this),a=$(""+$(this).data("link"));$("#messages i:first-child").addClass("animated bounce"),t.find("span").text(""),t.siblings(".active").removeClass("active"),t.toggleClass("active"),$(".util-box").children().not(a).removeClass("active"),a.hasClass("active")?a.removeClass("active").addClass("is-closed"):a.addClass("active")}),$(".util-content").click(function(e){e.stopPropagation()}),$(document).click(function(e){if(!$(e.target).is(".util-box")||!$(e.target).parents(".util-box").length){var t=$(".util-box").find(".active");t.length&&t.removeClass("active").addClass("is-closed").parents().removeClass("active")}}),$("#filter-items input").click(function(){var r=[],s=void 0,c=void 0;$("#filter-items input:checkbox:checked").each(function(){r.push($(this).val())}),r.length?$(".league-item-wrapper > div").map(function(){c=!0,s=$(this).attr("tags").split(" ");var e=!0,t=!1,a=void 0;try{for(var n,o=r[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;if(-1===s.indexOf(i)){c=!1;break}}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}c?$(this).show():$(this).hide()}):$(".league-item-wrapper > div").show()}),$("#search-filter input").keyup(function(){var e=$(this).val().toLowerCase();$(".league-item-wrapper > div").each(function(){$(this).data("title").search(e)<0?$(this).hide():$(this).show()})}),$("#overall-wrapper").on("change","#overall-league",function(){createLoader("#overall-patch-tables","Loading"),$.ajax({type:"GET",url:"/statistics/overall/"+$(this).val(),success:function(e){$("#overall-wrapper").html(e)}})}),$("#overall-champs").on("change","#overall-table-elo",function(){createLoader("#overall-table","Loading"),$.ajax({type:"GET",url:"/statistics/overall/champions/"+$(this).val(),success:function(e){$("#overall-champs").html(e)}})}),$("#spectate").click(function(){var e=$(this),t=e.attr("data-id"),a=e.attr("data-region"),n=e.attr("data-key");$.ajax({type:"post",url:"/spectate/"+t,data:{gameId:t,region:a,key:n},success:function(e){window.open("/spectate/"+e)},error:function(e){alert(e)}})}),$("#summoner-search").on("click","button",function(e){var t=window.location.href+"/summoner?"+$("#summoner-search").serialize()+"&region="+$("#summoner-search .active").attr("data-region");window.location=t}),$(".delete-post").click(function(){var e=$(this).attr("data-id");$.ajax({type:"DELETE",url:"/post/"+e,success:function(e){window.location.href="/profile"},error:function(e){alert(e)}})}),$(".like-post").click(function(){var t=$(this).attr("data-id"),a=$("#"+t+" .like-count").text();$.ajax({type:"POST",url:"/post/like/"+t,success:function(e){$("#"+t+" .like-post > button").toggleClass("active"),$("#"+t+" .like-count").text(+a+ +e)},error:function(e){errorAlert(e.responseText,"center")}})}),$(".comment-form").submit(function(e){e.preventDefault();var t=$(this).attr("data-id");$.ajax({type:"POST",data:$(this).serialize(),url:"/post/comment/"+t,success:function(e){successAlert("success","center","fa fa-comment")},error:function(e){errorAlert(e.responseText,"center")}})}),$("#message-form").submit(function(e){e.preventDefault(),$this=$(this),$this.addClass("loading");var t=$("#message-form").attr("data-id");$.ajax({type:"POST",data:$(this).serialize(),url:"/message/"+t,success:function(e){successAlert("success","center","fa fa-comment")},error:function(e){errorAlert(e.responseText,"center")},complete:function(){$this.removeClass("loading")}})}),$(document).on("click",".delete-comment",function(){var e=$(this).attr("data-id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"DELETE",url:"/post/comment/"+e,success:function(e){successAlert("Message deleted","topRight","fa fa-check")},error:function(e){alert(e)},complete:function(){return $this.prop("disabled",!1)}})}),$(document).on("click",".send-friend-request",function(){var e=$(this).attr("data-id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"POST",url:"users/sendFriendRequest/"+e,success:function(e){$("[data-id="+e+"]").replaceWith($("<button>").addClass("btn btn-warning").html("Pending")),$("#"+e).append($("<button>").addClass("btn btn-danger cancel-friend-request").attr("data-id",e).html("cancle")),successAlert("Request sent","topRight","fa fa-user")},error:function(e){errorAlert("Something went wrong :/ Please try again.","center")},complete:function(){return $this.prop("disabled",!1)}})}),$(document).on("click",".accept-friend-request",function(){var t=$(this).attr("data-id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"POST",url:"users/acceptFriendRequest/"+t,success:function(e){$("#"+t).remove()},error:function(e){alert(e)},complete:function(){return $this.prop("disabled",!1)}})}),$(document).on("click",".decline-friend-request",function(){var e=$(this).attr("data-id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"POST",url:"users/declineFriendRequest/"+e,success:function(e){$("#"+e).find("button").remove(),$("#"+e).append($("<button>").addClass("btn btn-success send-friend-request").attr("data-id",e).html("ADD"))},error:function(e){alert(e)},complete:function(){return $this.prop("disabled",!1)}})}),$(document).on("click",".cancel-friend-request",function(){var e=$(this).attr("data-id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"POST",url:"users/cancelFriendRequest/"+e,success:function(e){$("#"+e).find("button").remove(),$("#"+e).append($("<button>").addClass("btn btn-success send-friend-request").attr("data-id",e).html("ADD"))},error:function(e){alert(e)},complete:function(){return $this.prop("disabled",!1)}})}),$(".move-to-trash").click(function(){var e=$("#"+$(this).parent().attr("id"));$.confirm({draggable:!0,closeIcon:!0,icon:"fa fa-warning",type:"red",title:"Confirm",content:"Are you sure you want to delete this message ?",theme:"dark",buttons:{Yes:{action:function(){return e.remove()},btnClass:"btn btn-outline-success"},No:{action:function(){},btnClass:"btn btn-outline-danger"}}})}),$(".clear-trash").click(function(){var e=$("#"+$(this).parent().attr("id"));$.confirm({draggable:!0,closeIcon:!0,icon:"fa fa-warning",type:"red",title:"Confirm",content:"Are you sto delete this message ?",theme:"dark",buttons:{Yes:{action:function(){return e.remove()},btnClass:"btn btn-outline-success"},No:{action:function(){},btnClass:"btn btn-outline-danger"}}})}),$(".delete-photo").click(function(){var e=$(this).data("id"),t=$(this).data("uuid");$.confirm({draggable:!0,closeIcon:!0,icon:"fa fa-warning",type:"red",title:"Confirm",content:"Are you sure you want to delete this photo ?",theme:"dark",buttons:{Yes:{action:function(){$.ajax({url:"/profile/image/"+e,type:"DELETE",data:{uuid:t},success:function(){alert("success")},error:function(){alert("error")}})},btnClass:"btn btn-outline-success"},No:{action:function(){},btnClass:"btn btn-outline-danger"}}})}),$("#contact-form").submit(function(e){e.preventDefault(),$(".ajax-loader-wrapper").removeClass("invisible"),$("#contact-form button").prop("disabled",!0),$.ajax({type:"POST",url:"/contact",data:$("#contact-form").serialize(),success:function(e){successAlert(e,"center","fa fa-thumps-up")},error:function(e){errorAlert("Something went wrong :/ Please try again.","center")},complete:function(){$(".ajax-loader-wrapper").addClass("invisible"),$("#contact-form button").prop("disabled",!1)}})}),$("#feedback-form").submit(function(e){e.preventDefault(),$(".ajax-loader-wrapper").removeClass("invisible"),$("#feedback-form button").prop("disabled",!0),$.ajax({type:"POST",url:"/feedback",data:$("#feedback-form").serialize(),success:function(e){successAlert(e,"topRight","fa fa-thumps-up")},error:function(e){errorAlert("Something went wrong :/ Please try again.","center")},complete:function(){$(".ajax-loader-wrapper").addClass("invisible"),$("#feedback-form button").prop("disabled",!1)}})}),$("#inbox-controls > div").click(function(e){if(!$(this).hasClass("inbox-nav-active")){window.location.hash=$(this).attr("id");var t=$(this).attr("data-link");$(".inbox-nav-active").removeClass("inbox-nav-active"),$(this).addClass("inbox-nav-active"),$("#inbox-msg-wrapper > div").hide(),$("#"+t).show()}}),$(".remove-feedback").click(function(){$("#feedback-wrapper, .feedback-btns").remove()}),$(".feedback-btn, .close-feedback").click(function(){$("#feedback-wrapper").toggleClass("d-none"),$("#feedback-form textarea").focus()}),$("#scroll-top").click(function(){setTimeout(function(){return $("#scroll-top").css({display:"none"})},200),$("html, body").animate({scrollTop:0},200,"easeOutCubic")}),throttle(document,"scroll",500).subscribe(function(){500<$(e).scrollTop()?$("#scroll-top").css({display:"block"}):$("#scroll-top").css({display:"none"})})}),iziToast.settings({class:"izi-alert",titleSize:"18px",titleColor:"#b1a0ff",messageSize:"15px",messageColor:"#b1a0ff",iconColor:"#b1a0ff",backgroundColor:"rgba(44,44,44,0.7)",progressBarColor:"#b1a0ff",close:!0,position:"topRight",titleLineHeight:"1.2",messageLineHeight:"1.5"}),$("#suhdude").click(function(){iziToast.show({title:"Friend Request",message:'<a href="/users/yojimbozx">yojimbozx</a> sent you a friend request',icon:"fa fa-user"})});var socket=io();function uploadImage(){uploadcare.openDialog(null,{crop:"disabled",imagesOnly:!0}).done(function(e){e.promise().done(function(e){$.post("/upload/images",{uuid:e.uuid,cdnUrl:e.cdnUrl},function(){}).done(function(e){return successAlert("Upload complete","topRight","fa fa-check")}).fail(function(e){return errorAlert("Something went wrong :/ Please try again.","center")})})})}socket.on("friendRequest",function(e){successAlert('<a href="/users/'+e+'">'+e+"</a> sent you a friend request","topRight","fa fa-user")}),socket.on("likePost",function(e){successAlert('<a href="/users/'+e+'">'+e+"</a> liked your post","topRight","fa fa-thumbs-up")}),socket.on("comment",function(e){successAlert('<a href="/users/'+e+'">'+e+"</a> commented on your post","topRight","fa fa-comment")}),socket.on("acceptFriendRequest",function(e){successAlert('You and <a href="/users/'+e+'">'+e+"</a> are now friends!","topRight","fa fa-check")});
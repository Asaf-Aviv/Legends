include partials/head
body
    include partials/nav
    include partials/sidenav
    .container.pt-3
        .ui.centered.grid
            .eleven.wide.computer.fourteen.wide.tablet.sixteen.wide.mobile.column
                form#info-form.ui.form.mt-3(action="/profile/info" method="POST")
                    h4.ui.dividing.header My Information
                    .field
                        label Name
                        .two.fields
                            .field
                                input(type="text" name="firstName" placeholder="First Name" value=currentUser.info.firstName || '')
                            .field
                                input(type="text" name="lastName" placeholder="Last Name" value=currentUser.info.lastName || '')
                    .field
                        .two.fields
                            .field
                                label Gender
                                select#gender.ui.dropdown(name="gender")
                                    option(value="") Select
                                    option(value="male") Male
                                    option(value="female") Female
                                    
                                    
                            .field
                                label Country
                                select#country.ui.search.dropdown(name="country")
                                    option(value="") Select Country
                                    option(value="AF") Afghanistan
                                    option(value="AX") Åland Islands
                                    option(value="AL") Albania
                                    option(value="DZ") Algeria
                                    option(value="AS") American Samoa
                                    option(value="AD") Andorra
                                    option(value="AO") Angola
                                    option(value="AI") Anguilla
                                    option(value="AQ") Antarctica
                                    option(value="AG") Antigua and Barbuda
                                    option(value="AR") Argentina
                                    option(value="AM") Armenia
                                    option(value="AW") Aruba
                                    option(value="AU") Australia
                                    option(value="AT") Austria
                                    option(value="AZ") Azerbaijan
                                    option(value="BS") Bahamas
                                    option(value="BH") Bahrain
                                    option(value="BD") Bangladesh
                                    option(value="BB") Barbados
                                    option(value="BY") Belarus
                                    option(value="BE") Belgium
                                    option(value="BZ") Belize
                                    option(value="BJ") Benin
                                    option(value="BM") Bermuda
                                    option(value="BT") Bhutan
                                    option(value="BO") Bolivia, Plurinational State of
                                    option(value="BQ") Bonaire, Sint Eustatius and Saba
                                    option(value="BA") Bosnia and Herzegovina
                                    option(value="BW") Botswana
                                    option(value="BV") Bouvet Island
                                    option(value="BR") Brazil
                                    option(value="IO") British Indian Ocean Territory
                                    option(value="BN") Brunei Darussalam
                                    option(value="BG") Bulgaria
                                    option(value="BF") Burkina Faso
                                    option(value="BI") Burundi
                                    option(value="KH") Cambodia
                                    option(value="CM") Cameroon
                                    option(value="CA") Canada
                                    option(value="CV") Cape Verde
                                    option(value="KY") Cayman Islands
                                    option(value="CF") Central African Republic
                                    option(value="TD") Chad
                                    option(value="CL") Chile
                                    option(value="CN") China
                                    option(value="CX") Christmas Island
                                    option(value="CC") Cocos (Keeling) Islands
                                    option(value="CO") Colombia
                                    option(value="KM") Comoros
                                    option(value="CG") Congo
                                    option(value="CD") Congo, the Democratic Republic of the
                                    option(value="CK") Cook Islands
                                    option(value="CR") Costa Rica
                                    option(value="CI") Côte d'Ivoire
                                    option(value="HR") Croatia
                                    option(value="CU") Cuba
                                    option(value="CW") Curaçao
                                    option(value="CY") Cyprus
                                    option(value="CZ") Czech Republic
                                    option(value="DK") Denmark
                                    option(value="DJ") Djibouti
                                    option(value="DM") Dominica
                                    option(value="DO") Dominican Republic
                                    option(value="EC") Ecuador
                                    option(value="EG") Egypt
                                    option(value="SV") El Salvador
                                    option(value="GQ") Equatorial Guinea
                                    option(value="ER") Eritrea
                                    option(value="EE") Estonia
                                    option(value="ET") Ethiopia
                                    option(value="FK") Falkland Islands (Malvinas)
                                    option(value="FO") Faroe Islands
                                    option(value="FJ") Fiji
                                    option(value="FI") Finland
                                    option(value="FR") France
                                    option(value="GF") French Guiana
                                    option(value="PF") French Polynesia
                                    option(value="TF") French Southern Territories
                                    option(value="GA") Gabon
                                    option(value="GM") Gambia
                                    option(value="GE") Georgia
                                    option(value="DE") Germany
                                    option(value="GH") Ghana
                                    option(value="GI") Gibraltar
                                    option(value="GR") Greece
                                    option(value="GL") Greenland
                                    option(value="GD") Grenada
                                    option(value="GP") Guadeloupe
                                    option(value="GU") Guam
                                    option(value="GT") Guatemala
                                    option(value="GG") Guernsey
                                    option(value="GN") Guinea
                                    option(value="GW") Guinea-Bissau
                                    option(value="GY") Guyana
                                    option(value="HT") Haiti
                                    option(value="HM") Heard Island and McDonald Islands
                                    option(value="VA") Holy See (Vatican City State)
                                    option(value="HN") Honduras
                                    option(value="HK") Hong Kong
                                    option(value="HU") Hungary
                                    option(value="IS") Iceland
                                    option(value="IN") India
                                    option(value="ID") Indonesia
                                    option(value="IR") Iran, Islamic Republic of
                                    option(value="IQ") Iraq
                                    option(value="IE") Ireland
                                    option(value="IM") Isle of Man
                                    option(value="IL") Israel
                                    option(value="IT") Italy
                                    option(value="JM") Jamaica
                                    option(value="JP") Japan
                                    option(value="JE") Jersey
                                    option(value="JO") Jordan
                                    option(value="KZ") Kazakhstan
                                    option(value="KE") Kenya
                                    option(value="KI") Kiribati
                                    option(value="KP") Korea, Democratic People's Republic of
                                    option(value="KR") Korea, Republic of
                                    option(value="KW") Kuwait
                                    option(value="KG") Kyrgyzstan
                                    option(value="LA") Lao People's Democratic Republic
                                    option(value="LV") Latvia
                                    option(value="LB") Lebanon
                                    option(value="LS") Lesotho
                                    option(value="LR") Liberia
                                    option(value="LY") Libya
                                    option(value="LI") Liechtenstein
                                    option(value="LT") Lithuania
                                    option(value="LU") Luxembourg
                                    option(value="MO") Macao
                                    option(value="MK") Macedonia, the former Yugoslav Republic of
                                    option(value="MG") Madagascar
                                    option(value="MW") Malawi
                                    option(value="MY") Malaysia
                                    option(value="MV") Maldives
                                    option(value="ML") Mali
                                    option(value="MT") Malta
                                    option(value="MH") Marshall Islands
                                    option(value="MQ") Martinique
                                    option(value="MR") Mauritania
                                    option(value="MU") Mauritius
                                    option(value="YT") Mayotte
                                    option(value="MX") Mexico
                                    option(value="FM") Micronesia, Federated States of
                                    option(value="MD") Moldova, Republic of
                                    option(value="MC") Monaco
                                    option(value="MN") Mongolia
                                    option(value="ME") Montenegro
                                    option(value="MS") Montserrat
                                    option(value="MA") Morocco
                                    option(value="MZ") Mozambique
                                    option(value="MM") Myanmar
                                    option(value="NA") Namibia
                                    option(value="NR") Nauru
                                    option(value="NP") Nepal
                                    option(value="NL") Netherlands
                                    option(value="NC") New Caledonia
                                    option(value="NZ") New Zealand
                                    option(value="NI") Nicaragua
                                    option(value="NE") Niger
                                    option(value="NG") Nigeria
                                    option(value="NU") Niue
                                    option(value="NF") Norfolk Island
                                    option(value="MP") Northern Mariana Islands
                                    option(value="NO") Norway
                                    option(value="OM") Oman
                                    option(value="PK") Pakistan
                                    option(value="PW") Palau
                                    option(value="PS") Palestinian Territory, Occupied
                                    option(value="PA") Panama
                                    option(value="PG") Papua New Guinea
                                    option(value="PY") Paraguay
                                    option(value="PE") Peru
                                    option(value="PH") Philippines
                                    option(value="PN") Pitcairn
                                    option(value="PL") Poland
                                    option(value="PT") Portugal
                                    option(value="PR") Puerto Rico
                                    option(value="QA") Qatar
                                    option(value="RE") Réunion
                                    option(value="RO") Romania
                                    option(value="RU") Russian Federation
                                    option(value="RW") Rwanda
                                    option(value="BL") Saint Barthélemy
                                    option(value="SH") Saint Helena, Ascension and Tristan da Cunha
                                    option(value="KN") Saint Kitts and Nevis
                                    option(value="LC") Saint Lucia
                                    option(value="MF") Saint Martin (French part)
                                    option(value="PM") Saint Pierre and Miquelon
                                    option(value="VC") Saint Vincent and the Grenadines
                                    option(value="WS") Samoa
                                    option(value="SM") San Marino
                                    option(value="ST") Sao Tome and Principe
                                    option(value="SA") Saudi Arabia
                                    option(value="SN") Senegal
                                    option(value="RS") Serbia
                                    option(value="SC") Seychelles
                                    option(value="SL") Sierra Leone
                                    option(value="SG") Singapore
                                    option(value="SX") Sint Maarten (Dutch part)
                                    option(value="SK") Slovakia
                                    option(value="SI") Slovenia
                                    option(value="SB") Solomon Islands
                                    option(value="SO") Somalia
                                    option(value="ZA") South Africa
                                    option(value="GS") South Georgia and the South Sandwich Islands
                                    option(value="SS") South Sudan
                                    option(value="ES") Spain
                                    option(value="LK") Sri Lanka
                                    option(value="SD") Sudan
                                    option(value="SR") Suriname
                                    option(value="SJ") Svalbard and Jan Mayen
                                    option(value="SZ") Swaziland
                                    option(value="SE") Sweden
                                    option(value="CH") Switzerland
                                    option(value="SY") Syrian Arab Republic
                                    option(value="TW") Taiwan, Province of China
                                    option(value="TJ") Tajikistan
                                    option(value="TZ") Tanzania, United Republic of
                                    option(value="TH") Thailand
                                    option(value="TL") Timor-Leste
                                    option(value="TG") Togo
                                    option(value="TK") Tokelau
                                    option(value="TO") Tonga
                                    option(value="TT") Trinidad and Tobago
                                    option(value="TN") Tunisia
                                    option(value="TR") Turkey
                                    option(value="TM") Turkmenistan
                                    option(value="TC") Turks and Caicos Islands
                                    option(value="TV") Tuvalu
                                    option(value="UG") Uganda
                                    option(value="UA") Ukraine
                                    option(value="AE") United Arab Emirates
                                    option(value="GB") United Kingdom
                                    option(value="US") United States
                                    option(value="UM") United States Minor Outlying Islands
                                    option(value="UY") Uruguay
                                    option(value="UZ") Uzbekistan
                                    option(value="VU") Vanuatu
                                    option(value="VE") Venezuela, Bolivarian Republic of
                                    option(value="VN") Viet Nam
                                    option(value="VG") Virgin Islands, British
                                    option(value="VI") Virgin Islands, U.S.
                                    option(value="WF") Wallis and Futuna
                                    option(value="EH") Western Sahara
                                    option(value="YE") Yemen
                                    option(value="ZM") Zambia
                                    option(value="ZW") Zimbabwe
                    .field
                        .three.fields
                            .field
                                label Birthday
                                select#day.ui.dropdown(name="day")
                                    option(value="") Day
                            .field
                                label.invisible .
                                select#month.ui.dropdown(name="month" onchange="change_month(this)")
                                    option(value="") Month
                                    
                            .field
                                label.invisible() .
                                select#year.ui.dropdown(name="year" onchange="change_year(this)")
                                    option(value="") Year
                        .text-center
                            button.ui.basic.violet.button.m-auto Update Info
                    script.
                        let user = !{JSON.stringify(currentUser)}

                        $(`#gender option[value="${user.info.gender}"]`).attr('selected', true);
                        $(`#country option[value="${user.info.country}"]`).attr('selected', true);

                        if (user.info.birthday) {
                            let birthday = user.info.birthday.split('-');
                            $('#day option[value=""]').text(birthday[0]);
                            $('#month option[value=""]').text(birthday[1]);
                            $('#year option[value=""]').text(birthday[2]);
                        }
                    script.
                        $('select.dropdown[name=gender]').dropdown();
                        $('select.dropdown[name=country]').dropdown();
                        $('select.dropdown[name=day]').dropdown();
                        $('select.dropdown[name=month]').dropdown();
                        $('select.dropdown[name=year]').dropdown();
    include partials/footer
    include partials/scroll_top
    include partials/scripts
    script.
        var Days = [31,28,31,30,31,30,31,31,30,31,30,31];// index => month [0-11]
        $(document).ready(function(){
            var option = '<option value="">Day</option>';
            var selectedDay="day";
            for (var i=1;i <= Days[0];i++){ //add option days
                option += '<option value="'+ i + '">' + i + '</option>';
            }
            $('#day').append(option);
            $('#day').val(selectedDay);

            var option = '<option value="">Month</option>';
            var selectedMon ="month";
            for (var i=1;i <= 12;i++){
                option += '<option value="'+ i + '">' + moment(i, 'MM').format('MMMM') + '</option>';
            }
            $('#month').append(option);
            $('#month').val(selectedMon);

            var option = '<option value="">Month</option>';
            var selectedMon ="month";
            for (var i=1;i <= 12;i++){
                option += '<option value="'+ i + '">' + i + '</option>';
            }
            $('#month2').append(option);
            $('#month2').val(selectedMon);
        
            var d = new Date();
            var option = '<option value="">Year</option>';
            selectedYear ="year";
            for (var i=d.getFullYear(); i >= (d.getFullYear()-120);i--){// years start i
                option += '<option value="'+ i + '">' + i + '</option>';
            }
            $('#year').append(option);
            $('#year').val(selectedYear);
        });
        function isLeapYear(year) {
            year = parseInt(year);
            if (year % 4 != 0) {
                return false;
            } else if (year % 400 == 0) {
                return true;
            } else if (year % 100 == 0) {
                return false;
            } else {
                return true;
            }
        }

        function change_year(select)
        {
            if( isLeapYear( $(select).val() ) )
            {
                    Days[1] = 29;
                    if( $("#month").val() == 2)
                    {
                        var day = $('#day');
                        var val = $(day).val();
                        $(day).empty();
                        var option = '<option value="">Day</option>';
                        for (var i=1;i <= Days[1];i++){ //add option days
                                option += '<option value="'+ i + '">' + i + '</option>';
                    }
                        $(day).append(option);
                        if( val > Days[ month ] )
                        {
                                val = 1;
                        }
                        $(day).val(val);
                    }
            }
            else {
                Days[1] = 28;
            }
        }

        function change_month(select) {
            var day = $('#day');
            var val = $(day).val();
            $(day).empty();
            var option = '<option value="">Day</option>';
            var month = parseInt( $(select).val() ) - 1;
            for (var i=1;i <= Days[ month ];i++){ //add option days
                option += '<option value="'+ i + '">' + i + '</option>';
            }
            $(day).append(option);
            if( val > Days[ month ] )
            {
                val = 1;
            }
            $(day).val(val);
        }